(this["webpackJsonpproject-5-code-test"]=this["webpackJsonpproject-5-code-test"]||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/dreamShareAkatsukiCloud.98b98507.png"},22:function(e,t,a){e.exports=a(34)},27:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(16),l=a.n(c),r=(a(27),a(17)),m=a(18),i=a(21),s=a(20),u=a(9),d=a.n(u);a(28);d.a.initializeApp({apiKey:"AIzaSyCgA-RgJ1ifzC4V4GRLZzEkxkNWAOLi4lY",authDomain:"project-5-test-120f1.firebaseapp.com",databaseURL:"https://project-5-test-120f1.firebaseio.com",projectId:"project-5-test-120f1",storageBucket:"project-5-test-120f1.appspot.com",messagingSenderId:"120232366961",appId:"1:120232366961:web:3409e30e67044ea2aedcd0"});var h=d.a,p=a(4),v=a(2),f=a(3),g=a.n(f),y=a(19),b=a.n(y),E=(a(33),function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState({userInput:t.target.value})},e.handleTitle=function(t){e.setState({inputTitle:t.target.value})},e.handleClick=function(t){t.preventDefault();var a=h.database().ref();if(""!==e.state.userInput&&""!==e.state.inputTitle){var n={dream:e.state.userInput,title:e.state.inputTitle,vote:0,comments:[""]},o=a.push(n).key;e.setStorage("".concat(o,"author"),"yes"),e.setState({errorMessage:""}),window.location="#addedDream"}else g()({text:"Please give your entry a title and content before submitting",icon:"warning",button:"OK"});e.setState({inputTitle:"",userInput:""})},e.handleVote=function(t){if(window.localStorage.getItem("".concat(t,"liked"))){var a=h.database().ref("/".concat(t));a.once("value",(function(e){var n=e.val();n.vote--,a.set(n),window.localStorage.removeItem("".concat(t,"liked"),"yes"),document.getElementsByClassName("vote".concat(t))[0].classList.remove("liked")}))}else{var n=h.database().ref("/".concat(t));n.once("value",(function(a){var o=a.val();o.vote++,n.set(o),e.setStorage("".concat(t,"liked"),"yes")}))}},e.handleComment=function(t){e.setState({inputComment:t.target.value})},e.handleShowAddComment=function(e){document.getElementsByClassName("".concat(e,"input"))[0].classList.toggle("show")},e.handleAddComment=function(t){var a=h.database().ref("/".concat(t));""!==e.state.inputComment?(a.once("value",(function(n){var o=n.val();o.comments.push(e.state.inputComment),a.set(o);var c=o.comments.length-1;e.setStorage("".concat(t).concat(c),"yes")})),setTimeout((function(){document.getElementsByClassName("".concat(t,"input"))[0].classList.remove("show")}),0)):g()({text:"Sorry, can't submit an empty comment",button:"OK"}),document.querySelector(".dream".concat(t," .commentSectionInput")).value="",e.setState({inputComment:""})},e.handleRemove=function(e){window.localStorage.getItem("".concat(e,"author"))?g()({title:"Are you sure?",text:"Once deleted, you'll lose this dream forever",icon:"warning",buttons:!0,dangerMode:!0}).then((function(t){t?(g()("Your Dream has been deleted!",{icon:"success"}),h.database().ref().child(e).remove()):g()("Your Dream is safe!")})):g()({text:"Trying to delete someone else's dream?",icon:"warning",button:"My Bad"})},e.handleRemoveComment=function(e,t){window.localStorage.getItem("".concat(e).concat(t+1))?g()({title:"Are you sure?",text:"Once deleted, you'll lose this comment forever",icon:"warning",buttons:!0,dangerMode:!0}).then((function(a){a?(g()("Your comment has been deleted!",{icon:"success"}),h.database().ref().child("".concat(e,"/comments/").concat(t+1)).remove(),window.localStorage.removeItem("".concat(e).concat(t+1))):g()("Your comment is safe!")})):g()({text:"Trying to delete someone else's comment?",icon:"warning",button:"My Bad"})},e.state={dreams:[],userInput:"",inputTitle:"",inputComment:"",limit:7},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.database().ref().on("value",(function(t){var a=t.val(),n=[];for(var o in a)n.push({key:o,data:a[o]});e.setState({dreams:n})})),window.addEventListener("load",this.handleLoad)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("load",this.handleLoad)}},{key:"handleLoad",value:function(){document.getElementsByClassName("preloader")[0].classList.toggle("loaded")}},{key:"setStorage",value:function(e,t){var a=e,n=[t];window.localStorage.setItem(a,n)}},{key:"render",value:function(){var e=this;return this.state.dreams.forEach((function(e){window.localStorage.getItem("".concat(e.key,"liked"))&&setTimeout((function(){document.getElementsByClassName("vote".concat(e.key))[0].classList.add("liked")}),0)})),o.a.createElement("main",{className:"app",idname:"top"},o.a.createElement("div",{className:"preloader"},o.a.createElement("img",{src:b.a,alt:"a pulsing cloud while app content loads"})),o.a.createElement("div",{className:"appBackground"},o.a.createElement("div",{className:"backgroundImg"}),o.a.createElement("section",{className:"top"},o.a.createElement("div",null,o.a.createElement("h1",null,"Dream Share"),o.a.createElement("h2",null,"A place for everyone to document their dreams and explore the bizarre world of the subconcious"),o.a.createElement("form",{action:"submit"},o.a.createElement("label",{htmlFor:"newTitle"},"give your dream a title"),o.a.createElement("input",{onChange:this.handleTitle,value:this.state.inputTitle,type:"text",id:"newTitle",className:"titleInput",placeholder:"Title",maxLength:"20"}),o.a.createElement("label",{htmlFor:"newDream"},"tell us about a dream you've had"),o.a.createElement("textarea",{name:"newDream",id:"newDream",className:"dreamInput",rows:"20",onChange:this.handleChange,value:this.state.userInput,maxLength:"1100",placeholder:"One night I dreamt..."}),o.a.createElement("button",{className:"addDream",onClick:this.handleClick},"Share Dream")))),o.a.createElement("section",{className:"displaySection"},o.a.createElement("ul",{className:"dreamDisplay wrapper"},this.state.dreams.map((function(t){return o.a.createElement("li",{key:t.key,className:"returnDream dream".concat(t.key)},o.a.createElement("h2",null,t.data.title),o.a.createElement("p",null,t.data.dream),o.a.createElement("div",{className:"upVote"},o.a.createElement("p",null,t.data.vote),o.a.createElement("button",{"aria-label":"like this dream",className:"vote".concat(t.key," voteButton"),name:"like entry Button",onClick:function(){return e.handleVote(t.key)}},o.a.createElement(p.a,{icon:v.c})),o.a.createElement("p",null,t.data.comments.slice(1).length),o.a.createElement("button",{"aria-label":"add a comment to this dream entry",className:"commentbutton",name:"add comment button",onClick:function(){return e.handleShowAddComment(t.key)}},o.a.createElement(p.a,{icon:v.b}))),o.a.createElement("button",{"aria-label":"remove this dream entry",className:"removeButton",name:"remove entry button",onClick:function(){return e.handleRemove(t.key)}},o.a.createElement(p.a,{icon:v.e})),o.a.createElement("form",{action:"submit",className:"".concat(t.key,"input commentInput")},o.a.createElement("label",{htmlFor:"newComment","aria-label":"add a comment"}),o.a.createElement("input",{onChange:e.handleComment,value:e.state.dreams.inputComment,type:"text",className:"commentSectionInput",id:"".concat(t.key,"newComment newComment"),placeholder:"Comment",maxLength:"50"}),o.a.createElement("i",{className:"addComment",onClick:function(){return e.handleAddComment(t.key)}},o.a.createElement(p.a,{icon:v.d}))),o.a.createElement("div",{className:"commentSection"},t.data.comments.slice(1).map((function(a,n){return o.a.createElement("div",{key:n,className:"commentChild"},o.a.createElement("p",null,a),o.a.createElement("button",{"aria-label":"remove this comment",name:"remove comment button",className:"removeCommentButton",onClick:function(){return e.handleRemoveComment(t.key,n)}},o.a.createElement(p.a,{icon:v.e})))}))))})))),o.a.createElement("footer",{id:"addedDream"},o.a.createElement("a",{"aria-label":"Back to top",href:"#top",id:"backToTop"},o.a.createElement(p.a,{icon:v.a})),o.a.createElement("p",null,"Created by ",o.a.createElement("a",{href:"https://alianicodes.com/",target:"_blank",rel:"noopener noreferrer"},"Arman Aliani")))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.e44b09e0.chunk.js.map